#' REST API
#'
#' No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
#'
#' The version of the OpenAPI document: v1
#' Contact: support@apibricks.io
#' Generated by: https://openapi-generator.tech
#'
#' @docType class
#' @title Ohlcv operations
#' @description OhlcvApi
#' @format An \code{R6Class} generator object
#' @field api_client Handles the client-server communication.
#'
#' @examples
#' \dontrun{
#' ####################  V1OhlcvExchangeExchangeIdHistoryGet  ####################
#'
#' library(openapi)
#' var_exchange_id <- "exchange_id_example" # character | Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
#' var_period_id <- "period_id_example" # character | Identifier of requested timeseries period (e.g. `5SEC` or `1DAY`)
#' var_time_start <- "time_start_example" # character | Timeseries starting time in ISO 8601
#' var_time_end <- "time_end_example" # character | Timeseries ending time in ISO 8601
#'
#' #Historical data by exchange
#' api_instance <- OhlcvApi$new()
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1OhlcvExchangeExchangeIdHistoryGet(var_exchange_id, var_period_id, var_time_start, var_time_enddata_file = "result.txt")
#' result <- api_instance$V1OhlcvExchangeExchangeIdHistoryGet(var_exchange_id, var_period_id, var_time_start, var_time_end)
#' dput(result)
#'
#'
#' ####################  V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGet  ####################
#'
#' library(openapi)
#' var_exchange_id <- "exchange_id_example" # character | Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
#' var_symbol_id <- "symbol_id_example" # character | Symbol identifier of requested timeseries (from the Metadata -> Symbols)
#' var_period_id <- "period_id_example" # character | Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
#' var_time_start <- "time_start_example" # character | Timeseries starting time in ISO 8601 (Optional)
#' var_time_end <- "time_end_example" # character | Timeseries ending time in ISO 8601 (Optional)
#' var_limit <- 100 # integer | Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (Optional)
#'
#' #Historical data
#' api_instance <- OhlcvApi$new()
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGet(var_exchange_id, var_symbol_id, var_period_id, time_start = var_time_start, time_end = var_time_end, limit = var_limitdata_file = "result.txt")
#' result <- api_instance$V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGet(var_exchange_id, var_symbol_id, var_period_id, time_start = var_time_start, time_end = var_time_end, limit = var_limit)
#' dput(result)
#'
#'
#' ####################  V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGet  ####################
#'
#' library(openapi)
#' var_exchange_id <- "exchange_id_example" # character | Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
#' var_symbol_id <- "symbol_id_example" # character | Symbol identifier of requested timeseries (from the Metadata -> Symbols)
#' var_period_id <- "period_id_example" # character | Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
#' var_limit <- 100 # integer | Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (Optional)
#'
#' #Latest data
#' api_instance <- OhlcvApi$new()
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGet(var_exchange_id, var_symbol_id, var_period_id, limit = var_limitdata_file = "result.txt")
#' result <- api_instance$V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGet(var_exchange_id, var_symbol_id, var_period_id, limit = var_limit)
#' dput(result)
#'
#'
#' ####################  V1OhlcvPeriodsGet  ####################
#'
#' library(openapi)
#'
#' #List all periods
#' api_instance <- OhlcvApi$new()
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$V1OhlcvPeriodsGet(data_file = "result.txt")
#' result <- api_instance$V1OhlcvPeriodsGet()
#' dput(result)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom base64enc base64encode
#' @export
OhlcvApi <- R6::R6Class(
  "OhlcvApi",
  public = list(
    api_client = NULL,

    #' @description
    #' Initialize a new OhlcvApi.
    #'
    #' @param api_client An instance of API client.
    initialize = function(api_client) {
      if (!missing(api_client)) {
        self$api_client <- api_client
      } else {
        self$api_client <- ApiClient$new()
      }
    },

    #' @description
    #' Historical data by exchange
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `1DAY`)
    #' @param time_start Timeseries starting time in ISO 8601
    #' @param time_end Timeseries ending time in ISO 8601
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[OHLCVExchangeTimeseriesItem]
    V1OhlcvExchangeExchangeIdHistoryGet = function(exchange_id, period_id, time_start, time_end, data_file = NULL, ...) {
      local_var_response <- self$V1OhlcvExchangeExchangeIdHistoryGetWithHttpInfo(exchange_id, period_id, time_start, time_end, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Historical data by exchange
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `1DAY`)
    #' @param time_start Timeseries starting time in ISO 8601
    #' @param time_end Timeseries ending time in ISO 8601
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[OHLCVExchangeTimeseriesItem]) with additional information such as HTTP status code, headers
    V1OhlcvExchangeExchangeIdHistoryGetWithHttpInfo = function(exchange_id, period_id, time_start, time_end, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`exchange_id`)) {
        stop("Missing required parameter `exchange_id`.")
      }

      if (missing(`period_id`)) {
        stop("Missing required parameter `period_id`.")
      }

      if (missing(`time_start`)) {
        stop("Missing required parameter `time_start`.")
      }

      if (missing(`time_end`)) {
        stop("Missing required parameter `time_end`.")
      }





      query_params[["period_id"]] <- `period_id`

      query_params[["time_start"]] <- `time_start`

      query_params[["time_end"]] <- `time_end`

      local_var_url_path <- "/v1/ohlcv/exchange/{exchange_id}/history"
      if (!missing(`exchange_id`)) {
        local_var_url_path <- gsub("\\{exchange_id\\}", URLencode(as.character(`exchange_id`), reserved = TRUE), local_var_url_path)
      }


      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[OHLCVExchangeTimeseriesItem]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Historical data
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param symbol_id Symbol identifier of requested timeseries (from the Metadata -> Symbols)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
    #' @param time_start (optional) Timeseries starting time in ISO 8601
    #' @param time_end (optional) Timeseries ending time in ISO 8601
    #' @param limit (optional) Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[OHLCVTimeseriesItem]
    V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGet = function(exchange_id, symbol_id, period_id, time_start = NULL, time_end = NULL, limit = 100, data_file = NULL, ...) {
      local_var_response <- self$V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGetWithHttpInfo(exchange_id, symbol_id, period_id, time_start, time_end, limit, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Historical data
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param symbol_id Symbol identifier of requested timeseries (from the Metadata -> Symbols)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
    #' @param time_start (optional) Timeseries starting time in ISO 8601
    #' @param time_end (optional) Timeseries ending time in ISO 8601
    #' @param limit (optional) Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[OHLCVTimeseriesItem]) with additional information such as HTTP status code, headers
    V1OhlcvExchangeSymbolExchangeIdSymbolIdHistoryGetWithHttpInfo = function(exchange_id, symbol_id, period_id, time_start = NULL, time_end = NULL, limit = 100, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`exchange_id`)) {
        stop("Missing required parameter `exchange_id`.")
      }

      if (missing(`symbol_id`)) {
        stop("Missing required parameter `symbol_id`.")
      }

      if (missing(`period_id`)) {
        stop("Missing required parameter `period_id`.")
      }







      query_params[["period_id"]] <- `period_id`

      query_params[["time_start"]] <- `time_start`

      query_params[["time_end"]] <- `time_end`

      query_params[["limit"]] <- `limit`

      local_var_url_path <- "/v1/ohlcv/exchange-symbol/{exchange_id}/{symbol_id}/history"
      if (!missing(`exchange_id`)) {
        local_var_url_path <- gsub("\\{exchange_id\\}", URLencode(as.character(`exchange_id`), reserved = TRUE), local_var_url_path)
      }

      if (!missing(`symbol_id`)) {
        local_var_url_path <- gsub("\\{symbol_id\\}", URLencode(as.character(`symbol_id`), reserved = TRUE), local_var_url_path)
      }


      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[OHLCVTimeseriesItem]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Latest data
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param symbol_id Symbol identifier of requested timeseries (from the Metadata -> Symbols)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
    #' @param limit (optional) Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[OHLCVTimeseriesItem]
    V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGet = function(exchange_id, symbol_id, period_id, limit = 100, data_file = NULL, ...) {
      local_var_response <- self$V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGetWithHttpInfo(exchange_id, symbol_id, period_id, limit, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Latest data
    #'
    #' @param exchange_id Exchange identifier of requested timeseries (from the Metadata -> Exchanges)
    #' @param symbol_id Symbol identifier of requested timeseries (from the Metadata -> Symbols)
    #' @param period_id Identifier of requested timeseries period (e.g. `5SEC` or `2MTH`)
    #' @param limit (optional) Amount of items to return (mininum is 1, maximum is 100000, default value is 100, if the parameter is used then every 100 output items are counted as one request) (default value: 100)
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[OHLCVTimeseriesItem]) with additional information such as HTTP status code, headers
    V1OhlcvExchangeSymbolExchangeIdSymbolIdLatestGetWithHttpInfo = function(exchange_id, symbol_id, period_id, limit = 100, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`exchange_id`)) {
        stop("Missing required parameter `exchange_id`.")
      }

      if (missing(`symbol_id`)) {
        stop("Missing required parameter `symbol_id`.")
      }

      if (missing(`period_id`)) {
        stop("Missing required parameter `period_id`.")
      }





      query_params[["period_id"]] <- `period_id`

      query_params[["limit"]] <- `limit`

      local_var_url_path <- "/v1/ohlcv/exchange-symbol/{exchange_id}/{symbol_id}/latest"
      if (!missing(`exchange_id`)) {
        local_var_url_path <- gsub("\\{exchange_id\\}", URLencode(as.character(`exchange_id`), reserved = TRUE), local_var_url_path)
      }

      if (!missing(`symbol_id`)) {
        local_var_url_path <- gsub("\\{symbol_id\\}", URLencode(as.character(`symbol_id`), reserved = TRUE), local_var_url_path)
      }


      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[OHLCVTimeseriesItem]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' List all periods
    #'
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return array[OHLCVTimeseriesPeriod]
    V1OhlcvPeriodsGet = function(data_file = NULL, ...) {
      local_var_response <- self$V1OhlcvPeriodsGetWithHttpInfo(data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' List all periods
    #'
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (array[OHLCVTimeseriesPeriod]) with additional information such as HTTP status code, headers
    V1OhlcvPeriodsGetWithHttpInfo = function(data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      local_var_url_path <- "/v1/ohlcv/periods"

      # The Accept request HTTP header
      local_var_accepts <- list("text/plain", "application/json", "text/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "array[OHLCVTimeseriesPeriod]"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    }
  )
)
